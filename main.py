# üìö –®–∞–±–ª–æ–Ω –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
# –¢–µ–º–∞: –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SQLite (DB API 2.0)
# –ó–∞–¥–∞–Ω–∏–µ: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É

import sqlite3
from datetime import date

conn = sqlite3.connect('library.db')
cursor = conn.cursor()

# üìå –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
def create_tables():
    """
    –°–æ–∑–¥–∞–π —Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã: Books, Users, Borrowings.
    –ò—Å–ø–æ–ª—å–∑—É–π CREATE TABLE IF NOT EXISTS –∏ —É–∫–∞–∂–∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.
    –ù–µ –∑–∞–±—É–¥—å –∑–∞–¥–∞—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –∏ —Å–≤—è–∑–∏ (FOREIGN KEY).
    """
    pass  # –ù–∞–ø–∏—à–∏ –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
def seed_data():
    """
    –í—Å—Ç–∞–≤—å –≤ —Ç–∞–±–ª–∏—Ü—ã Books –∏ Users –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
    –ò—Å–ø–æ–ª—å–∑—É–π executemany() –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (?).
    """
    pass  # –í—Å—Ç–∞–≤—å –∫–Ω–∏–≥–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç–∞–±–ª–∏—Ü—ã –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –≤—ã–¥–∞—á–∏ –∫–Ω–∏–≥–∏
def borrow_book(user_id, book_id):
    """
    –ü—Ä–æ–≤–µ—Ä—å, –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –∫–Ω–∏–≥–∞.
    –ï—Å–ª–∏ –¥–∞ ‚Äî –≤—ã–¥–∞–π –µ—ë (–æ–±–Ω–æ–≤–∏ –ø–æ–ª–µ available –≤ Books –∏ —Å–æ–∑–¥–∞–π –∑–∞–ø–∏—Å—å –≤ Borrowings).
    –û–±—Ä–∞–±–æ—Ç–∞–π –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–Ω–∏–≥–∞ —É–∂–µ –≤—ã–¥–∞–Ω–∞).
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –≤—ã–¥–∞—á—É –∫–Ω–∏–≥–∏ –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–Ω–∏–≥–∏
def return_book(book_id):
    """
    –û—Ç–º–µ—Ç—å –∫–Ω–∏–≥—É –∫–∞–∫ –¥–æ—Å—Ç—É–ø–Ω—É—é.
    –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–∞ –≤—ã–¥–∞–Ω–∞.
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –≤–æ–∑–≤—Ä–∞—Ç –∫–Ω–∏–≥–∏ –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –∫–Ω–∏–≥
def show_books():
    """
    –í—ã–≤–µ–¥–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥ —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–º: '–î–æ—Å—Ç—É–ø–Ω–∞' –∏–ª–∏ '–í—ã–¥–∞–Ω–∞'.
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –∫–Ω–∏–≥ –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∫–Ω–∏–≥, –≤—ã–¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
def show_user_books(user_id):
    """
    –í—ã–≤–µ–¥–∏ —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ —Ä—É–∫–∞—Ö —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    –ò—Å–ø–æ–ª—å–∑—É–π JOIN –º–µ–∂–¥—É Borrowings –∏ Books.
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –ø–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–Ω–∏–≥ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É
def search_books(keyword):
    """
    –ù–∞–π–¥–∏ –∫–Ω–∏–≥–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–≤—Ç–æ—Ä—É.
    –ò—Å–ø–æ–ª—å–∑—É–π LIKE –∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É (%–∫–ª—é—á–µ–≤–æ–µ_—Å–ª–æ–≤–æ%).
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –ø–æ–∏—Å–∫ –∫–Ω–∏–≥ –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üìå –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def add_user(name, email):
    """
    –í—Å—Ç–∞–≤—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É Users.
    –û–±—Ä–∞–±–æ—Ç–∞–π –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ email —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ.
    """
    pass  # –†–µ–∞–ª–∏–∑—É–π –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ pass

# üß≠ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
def main_menu():
    """
    –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –º–µ–Ω—é.
    """
    while True:
        print("\nüìö –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:")
        print("1. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏")
        print("2. –í—ã–¥–∞—Ç—å –∫–Ω–∏–≥—É")
        print("3. –í–µ—Ä–Ω—É—Ç—å –∫–Ω–∏–≥—É")
        print("4. –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
        print("5. –ü–æ–∏—Å–∫ –∫–Ω–∏–≥–∏")
        print("6. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
        print("7. –í—ã—Ö–æ–¥")

        choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ")

        if choice == '1':
            show_books()
        elif choice == '2':
            try:
                user_id = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
                book_id = int(input("ID –∫–Ω–∏–≥–∏: "))
                borrow_book(user_id, book_id)
            except ValueError:
                print("‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞.")
        elif choice == '3':
            try:
                book_id = int(input("ID –∫–Ω–∏–≥–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞: "))
                return_book(book_id)
            except ValueError:
                print("‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID.")
        elif choice == '4':
            try:
                user_id = int(input("ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "))
                show_user_books(user_id)
            except ValueError:
                print("‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID.")
        elif choice == '5':
            keyword = input("–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞: ")
            search_books(keyword)
        elif choice == '6':
            name = input("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ")
            email = input("Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ")
            add_user(name, email)
        elif choice == '7':
            print("üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
            break
        else:
            print("‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

# ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
if __name__ == '__main__':
    create_tables()
    # seed_data()  # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    main_menu()
    conn.close()